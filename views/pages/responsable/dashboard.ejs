<!-- ============================ Page Title Start ================================== -->
<section class="call-to-act" style="background:#0b85ec url(/img/landing-bg.png) no-repeat;">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-12 col-md-12">
        <h2 class="text-light">Dashboard Responsable</h2>
        <span class="ipn-subtitle text-light">
          Bienvenue sur votre espace ‚Äî <span style="color:#ffd700; font-weight:600;">suivi global des formations</span>
        </span>
      </div>
    </div>
  </div>
</section>
<!-- ============================ Page Title End ================================== -->

<!-- ============================ Dashboard Section Start ================================== -->
<section class="gray-bg py-5">
  <div class="container">
    <div class="row g-4">

      <!-- ==== LIGNE 1 : Formations ==== -->
      <div class="col-lg-3 col-md-6">
        <div class="card shadow-sm border-0 p-4 text-center" style="border-left:5px solid #0b85ec;">
          <h5>Total Formations</h5>
          <h2 class="theme-cl">
            <%= totalFormations %>
          </h2>
          <p class="text-muted mb-0">Toutes les formations cr√©√©es</p>
        </div>
      </div>

      <div class="col-lg-3 col-md-6">
        <div class="card shadow-sm border-0 p-4 text-center" style="border-left:5px solid #ffc107;">
          <h5>En attente</h5>
          <h2 class="text-warning">
            <%= pendingFormations %>
          </h2>
          <p class="text-muted mb-0">
            <%= stats.pendingPercent %>% du total
          </p>
        </div>
      </div>

      <div class="col-lg-3 col-md-6">
        <div class="card shadow-sm border-0 p-4 text-center" style="border-left:5px solid #28a745;">
          <h5>Valid√©es</h5>
          <h2 class="text-success">
            <%= validatedFormations %>
          </h2>
          <p class="text-muted mb-0">
            <%= stats.validatedPercent %>% du total
          </p>
        </div>
      </div>

      <div class="col-lg-3 col-md-6">
        <div class="card shadow-sm border-0 p-4 text-center" style="border-left:5px solid #dc3545;">
          <h5>Refus√©es</h5>
          <h2 class="text-danger">
            <%= refusedFormations %>
          </h2>
          <p class="text-muted mb-0">
            <%= stats.refusedPercent %>% du total
          </p>
        </div>
      </div>
    </div>

    <!-- ==== LIGNE 2 : Autres stats ==== -->
    <div class="row g-4 mt-4">
      <div class="col-lg-6 col-md-6">
        <div class="card shadow-sm border-0 p-5 text-center" style="border-left:5px solid #17a2b8;">
          <h5>Stagiaires inscrits</h5>
          <h2 class="text-info">
            <%= totalStagiaires %>
          </h2>
          <p class="text-muted mb-0">Nombre total de stagiaires</p>
        </div>
      </div>

      <div class="col-lg-6 col-md-6">
        <div class="card shadow-sm border-0 p-5 text-center" style="border-left:5px solid #6f42c1;">
          <h5>Entreprises partenaires</h5>
          <h2 style="color:#6f42c1;">
            <%= totalEntreprises %>
          </h2>
          <p class="text-muted mb-0">Collaborations actives</p>
        </div>
      </div>
    </div>


    <!-- Derni√®res formations -->
    <div class="row mt-5">
      <div class="col-lg-12">
        <div class="card shadow-sm border-0">
          <div class="card-header bg-primary text-light d-flex justify-content-between align-items-center">
            <h5 class="mb-0">üìö Derni√®res formations ajout√©es</h5>
            <a href="/formations/all/formations" class="btn btn-light btn-sm">Voir toutes</a>
          </div>
          <div class="card-body">
            <% if (latestFormations.length===0) { %>
              <p class="text-muted">Aucune formation r√©cente.</p>
              <% } else { %>
                <table class="table table-striped align-middle">
                  <thead class="table-light">
                    <tr>
                      <th>Titre</th>
                      <th>Entreprise</th>
                      <th>Dur√©e</th>
                      <th>Prix</th>
                      <th>Statut</th>
                      <th>Date de cr√©ation</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% latestFormations.forEach(f=> { %>
                      <tr>
                        <td><strong>
                            <%= f.title %>
                          </strong></td>
                        <td>
                          <%= f.entreprise ? f.entreprise.name : 'N/A' %>
                        </td>
                        <td>
                          <%= f.duration %> jours
                        </td>
                        <td>
                          <%= f.price ? f.price + ' DT' : '‚Äî' %>
                        </td>
                        <td>
                          <% if (f.status==='Valid√©e' ) { %>
                            <span class="badge bg-success">Valid√©e</span>
                            <% } else if (f.status==='En attente' ) { %>
                              <span class="badge bg-warning text-dark">En attente</span>
                              <% } else if (f.status==='Refus√©e' ) { %>
                                <span class="badge bg-danger">Refus√©e</span>
                                <% } %>
                        </td>
                        <td>
                          <%= new Date(f.createdAt).toLocaleDateString('fr-FR') %>
                        </td>
                      </tr>
                      <% }) %>
                  </tbody>
                </table>
                <% } %>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- ============================ Dashboard Section End ================================== -->

<!-- ‚úÖ Ajoute ton style ici -->
<style>
  .card {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
  .card:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
  }
  .card h5 {
    font-weight: 600;
  }
  .card h2 {
    font-size: 2rem;
    margin-bottom: 0.5rem;
  }
</style>