<!-- ============================ Page Title Start ================================== -->
<section class="call-to-act" style="background:#ec780bd5 url(/img/landing-bg.png) no-repeat">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-12 col-md-12">
        <h2 class="text-light">Liste des Formations</h2>
        <span class="ipn-subtitle text-light">
          Dashboard Responsable -
          <span style="color: #0c0101; font-weight: 600;">Formations en attente ou refusées</span>
        </span>

      </div>
    </div>
  </div>
</section>
<!-- ============================ Page Title End ================================== -->

<!-- ============================ Main Section Start ================================== -->
<section class="gray-bg">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">

        <% if (formations.length===0) { %>
          <div class="alert alert-info mt-4">
            Aucune formation en attente ou refusée.
          </div>
          <% } else { %>

            <table class="table table-striped table-bordered mt-4">
              <thead class="thead-dark text-center">
                <tr>
                  <th>Image</th>
                  <th>Titre</th>
                  <th>Entreprise</th>
                  <th>Durée</th>
                  <th>Prix</th>
                  <th>Statut</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <% formations.forEach(formation=> { %>
                  <tr class="align-middle text-center">
                    <td>
                      <% if (formation.image) { %>
                        <img src="<%= formation.image %>" class="img-fluid rounded" width="80" height="60"
                          alt="Formation Image">
                        <% } else { %>
                          <img src="/img/co-4.jpg" class="img-fluid rounded" width="80" height="60" alt="Default Image">
                          <% } %>
                    </td>
                    <td><strong>
                        <%= formation.title %>
                      </strong></td>
                    <td>
                      <%= formation.entreprise?.name || 'N/A' %>
                    </td>
                    <td>
                      <%= formation.duration %> jours
                    </td>
                    <td>
                      <%= formation.price %> DT
                    </td>

                    <td>
                      <% if (formation.status==='En attente' ) { %>
                        <span class="badge bg-warning text-dark px-3 py-2">En attente</span>
                        <% } else if (formation.status==='Refusée' ) { %>
                          <span class="badge bg-danger px-3 py-2">Refusée</span>
                          <% } else if (formation.status==='Validée' ) { %>
                            <span class="badge bg-success px-3 py-2">Validée</span>
                            <% } else { %>
                              <span class="badge bg-secondary px-3 py-2">Inconnu</span>
                              <% } %>
                    </td>

                    <td>
                      <form action="/responsable/formations/<%= formation._id %>/validate" method="POST"
                        style="display:inline;">
                        <button class="btn btn-success btn-sm" title="Valider">
                          <i class="fa fa-check"></i>
                        </button>
                      </form>

                      <form action="/responsable/formations/<%= formation._id %>/reject" method="POST"
                        style="display:inline;">
                        <button class="btn btn-danger btn-sm" title="Refuser">
                          <i class="fa fa-times"></i>
                        </button>
                      </form>
                    </td>
                  </tr>
                  <% }) %>
              </tbody>
            </table>

            <% } %>
      </div>
    </div>
  </div>
</section>
<!-- ============================ Main Section End ================================== -->